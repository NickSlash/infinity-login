<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Barcode Generator</title>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode/dist/JsBarcode.all.min.js"></script>
    <script>
        let barcodeConfig = {
            format: "code128",
            displayValue: false,
            background: "#ffffff"
        }
        function rotateDataURL(data, callback) {
            let image = new Image()
            image.src = data
            image.addEventListener("load", (event) => { 
                let canvas = document.createElement("canvas")
                canvas.width = image.height
                canvas.height = image.width
                let context = canvas.getContext("2d")
                context.imageSmoothingEnabled = false
                context.translate(image.height, image.width/image.height)
                context.rotate(Math.PI/2)
                context.drawImage(image, 0,0)
                callback(context.toDataURL())
            })
        }
        document.addEventListener("DOMContentLoaded", (event) => {
            let button = document.querySelector("#button")
            let barcode = document.querySelector("#barcode")

            let canvas = document.querySelector("#canvas")
            button.addEventListener("click", (event) => {
                JsBarcode(canvas, barcode.value, barcodeConfig)
                rotateDataURL(canvas.toDataURL("image/png"), (result) => {
                    window.location.href = result
                })
            })
        })
    </script>
</head>
<body>
    <input type="text" id="barcode">
    <button id="button">Generate Barcode</button>
    <canvas id="canvas" style="display: none"></canvas>
</body>
</html>
